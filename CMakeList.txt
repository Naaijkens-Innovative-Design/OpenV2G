# SPDX-License-Identifier: Apache-2.0

if(CONFIG_OPENV2G)

  set(OPENV2G_DIR ${ZEPHYR_CURRENT_MODULE_DIR})

  zephyr_library()

  zephyr_include_directories(
    ${OPENV2G_DIR/src/appHandshake
    ${OPENV2G_DIR}/src/codec
    ${OPENV2G_DIR}/src/din
    ${OPENV2G_DIR}/src/iso1
    ${OPENV2G_DIR}/src/iso2
    ${OPENV2G_DIR}/src/transport
    ${OPENV2G_DIR}/src/xmldsig
  )

  zephyr_library_sources(
    ${OPENV2G_DIR}/src/appHandshake/appHandEXIDatatypes.c
    ${OPENV2G_DIR}/src/appHandshake/appHandEXIDatatypesDecoder.c
    ${OPENV2G_DIR}/src/appHandshake/appHandEXIDatatypesEncoder.c
    ${OPENV2G_DIR}/src/codec/BitInputStream.c
    ${OPENV2G_DIR}/src/codec/BitOutputStream.c
    ${OPENV2G_DIR}/src/codec/ByteStream.c
    ${OPENV2G_DIR}/src/codec/DecoderChannel.c
    ${OPENV2G_DIR}/src/codec/EncoderChannel.c
    ${OPENV2G_DIR}/src/codec/EXIHeaderDecoder.c
    ${OPENV2G_DIR}/src/codec/EXIHeaderEncoder.c
    ${OPENV2G_DIR}/src/codec/MethodsBag.c
    ${OPENV2G_DIR}/src/din/dinEXIDatatypes.c
    ${OPENV2G_DIR}/src/din/dinEXIDatatypesDecoder.c
    ${OPENV2G_DIR}/src/din/dinEXIDatatypesEncoder.c
  )

  zephyr_library_sources_ifdef(OPENV2G_ISO1 ${OPENV2G_DIR}/src/iso1/iso1EXIDatatypes.c)
  zephyr_library_sources_ifdef(OPENV2G_ISO1 ${OPENV2G_DIR}/src/iso1/iso1EXIDatatypesDecoder.c)
  zephyr_library_sources_ifdef(OPENV2G_ISO1 ${OPENV2G_DIR}/src/iso1/iso1EXIDatatypesEncoder.c)
  zephyr_library_sources_ifdef(OPENV2G_ISO2 ${OPENV2G_DIR}/src/iso2/iso2EXIDatatypes.c)
  zephyr_library_sources_ifdef(OPENV2G_ISO2 ${OPENV2G_DIR}/src/iso2/iso2EXIDatatypesDecoder.c)
  zephyr_library_sources_ifdef(OPENV2G_ISO2 ${OPENV2G_DIR}/src/iso2/iso2EXIDatatypesEncoder.c)
  zephyr_library_sources_ifdef(OPENV2G_TP ${OPENV2G_DIR}/src/transport/v2gtp.c)
  zephyr_library_sources_ifdef(OPENV2G_XMLDSIG ${OPENV2G_DIR}/src/xmldsig/xmldsigEXIDatatypes.c)
  zephyr_library_sources_ifdef(OPENV2G_XMLDSIG ${OPENV2G_DIR}/src/xmldsig/xmldsigEXIDatatypesDecoder.c)
  zephyr_library_sources_ifdef(OPENV2G_XMLDSIG ${OPENV2G_DIR}/src/xmldsig/xmldsigEXIDatatypesEncoder.c)

endif()
